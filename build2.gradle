
task unzipTomcat(type: Copy) {
	println "Installing tomcat 7 ..."
    def zipFile = file('installation/apache-tomcat-7.0.34.zip')
    def outputDir = file("./tomcat7")
    from zipTree(zipFile)
    into outputDir
}

task copySolrWar(type: Copy, dependsOn: unzipTomcat) {
	println "copy solr war to tomcat ..."
	def sourceFile = file('installation/apache-solr-4.0.0.war')
	def targetDir = file('./tomcat7/apache-tomcat-7.0.34/webapps')
	from sourceFile
	into targetDir
	rename ('apache-solr-4.0.0.war', 'solr.war')
}

task copySolrContextXml(type: Copy, dependsOn: copySolrWar) {
	println "configuring tomcat 7 ..."
	def sourceDir = file('installation/solr.xml')
	def targetDir = file('./tomcat7/apache-tomcat-7.0.34/conf/Catalina/localhost')
	from sourceDir
	into targetDir
}

task copySolrHome(type: Copy, dependsOn: copySolrContextXml) {
	println "Installing solr home ..."
	def sourceDir = file('installation/solr_home')
	def targetDir = file('./solr_home')
	from sourceDir
	into targetDir
}

task install(dependsOn: copySolrHome) {
	println "Done"
}

task clean(type: Delete) {
   delete './tomcat7', './solr_home'
}

 


